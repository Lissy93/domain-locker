<p-card *ngIf="!isAuthenticated" header="Welcome to Domain Locker" subheader="The all-in-one platform for keeping track of domain names">
  <h3>Features</h3>
  <ul class="list-inside pl-0 mt-0 list-none">
    <li *ngFor="let feature of features">
      <i class="mr-2 pi {{feature.icon}}"></i>
      {{ feature.text }}
    </li>
  </ul>

  <ng-template pTemplate="footer">
    <div class="w-full">
      <div class="flex flex-col gap-3 mt-1 md:flex-row md:justify-between">
        <!-- Left container for the first two buttons on larger screens -->
        <div class="flex flex-col gap-3 w-full md:w-2/3 md:flex-row">
          <p-button 
            label="View on GitHub" 
            severity="secondary" 
            icon="pi pi-github" 
            class="min-w-48" 
            styleClass="w-full" 
          />
          <p-button 
            label="Self-Hosting" 
            severity="secondary" 
            icon="pi pi-server" 
            class="min-w-48" 
            styleClass="w-full" 
          />
        </div>
        <!-- Right container for the final button on larger screens -->
        <div class="flex w-full md:w-1/3 justify-end  flex-col gap-3 w-full md:flex-row">
          <p-button
            routerLink="/login"
            label="Get Started" 
            class="min-w-48" 
            icon="pi pi-arrow-circle-right" 
            styleClass="w-full" 
          />
        </div>
      </div>
    </div>
  </ng-template>
</p-card>

      

@if (isAuthenticated) {
  @if (loading) {
    <loading loadingTitle="Loading" loadingDescription="Fetching your domains, and calculating stats" />
  }
  @if (domains.length === 0) {
    <welcome />
  } @else {
    <h2 class="my-4 block">{{ 'HOME.SUBHEADINGS.DASHBOARD' | translate }}</h2>
    <div class="p-card p-4">
      <h4 class="mt-0 mb-4">Upcoming Expirations</h4>
      <app-domain-expiration-bar></app-domain-expiration-bar>
    </div>
    @if (showInsights) {
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 relative my-4 mx-0.5">
        <div class="p-card p-4">
          <h4>Domain Providers</h4>
          <div class="w-full">
            <app-domain-pie-charts />
          </div>
        </div>
        <div class="p-card p-4">
          <h4>Security Profile</h4>
          <app-epp-status-chart />
        </div>
        <div class="p-card p-4">
          <h4>Host Geography</h4>
          <div class="w-full">
            <app-host-map />
          </div>
        </div>
        <div class="p-card p-4">
          <h4>Tags</h4>
          <div class="w-full">
            <app-tag-cloud />
          </div>
        </div>
        <div class="p-card p-4 col-span-2">
          <h4>Registration Timeline</h4>
          <div class="w-full max-h-96">
            <p-scrollPanel [style]="{ width: '100%', height: '380px' }">
              <app-domain-gantt-chart [groupDates]="true" />
            </p-scrollPanel>
          </div>
        </div>
      </div>
      <p-button
        label="Show more insights"
        icon="pi pi-angle-double-right"
        size="small"
        [outlined]="true"
        class="flex justify-end"
        routerLink="/stats"
      />
    }
    <p-divider align="center" (click)="toggleInsights()">
      @if (!showInsights) {
        <div class="flex gap-2 items-center px-3 py-2 cursor-pointer hover:text-primary">
          <i class="pi pi-angle-double-down"></i>
          <span>Expand Stats</span>
          <i class="pi pi-angle-double-down"></i>
        </div>
      } @else {
        <div class="flex gap-2 items-center px-1 py-1 cursor-pointer hover:text-primary text-xs opacity-70">
          <i class="pi pi-angle-double-up"></i>
          <span>Hide Stats</span>
          <i class="pi pi-angle-double-up"></i>
        </div>
      }
    </p-divider>
    <h2 class="my-4 block">{{ 'HOME.SUBHEADINGS.DOMAINS' | translate }}</h2>
    <app-domain-view  *ngIf="!loading" [domains]="domains" [showFooter]="false" ($triggerReload)="loadDomains()"  />
    <p-divider />
    <h2 class="my-4 block">{{ 'HOME.SUBHEADINGS.CATEGORIES' | translate }}</h2>
    <app-tag-grid />
    <p-divider />
    <app-asset-list class="block m-2"></app-asset-list>
    <p class="mx-0 mt-4 mb-2 float-right text-xs text-surface-300">
      <a class="text-primary opacity-70" routerLink="/assets">View All Assets</a><br>
    </p>
  }
  <p-divider />
  <app-sponsor-message />
}

