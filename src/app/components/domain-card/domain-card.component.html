<div class="domain-card p-card bg-surface-card text-default px-4 py-2 mb-4 shadow-md border-radius-custom h-full flex flex-col gap-4 relative">
  
  <!-- Action buttons - visible only on hover -->
  <div class="edit-button-container absolute top-2 right-2 gap-2 align-items-center">
    <p-button
      label="Edit"
      [link]="true"
      icon="pi pi-pencil"
      class="text-xs text-default m-0 opacity-70 hover:!opacity-100"
      styleClass="text-default m-0 p-2 font-normal text-xs" />
  </div>

  <!-- Domain Name -->
  <h2 class="m-0">
    <app-domain-favicon [domain]="domain.domain_name" [size]="24" class="mr-2"></app-domain-favicon>
    <span class="text-primary">{{ domainUtils.splitDomain(domain.domain_name).domain }}</span>
    <span class="text-default">.</span>
    <span class="text-secondary">{{ domainUtils.splitDomain(domain.domain_name).tld }}</span>
  </h2>
  
  <!-- Core Info: Registrar and Expiry -->
  <div class="flex justify-between align-items-center">
    <p *ngIf="domain.registrar"
      class="m-0 truncate max-w-xs"
      [pTooltip]="'Registrar: ' + domain.registrar"
    >{{ domain.registrar.name }}</p>
    <p-tag
      [pTooltip]="domain.expiry_date ? 'Expires on ' + (domain.expiry_date | date:'mediumDate') : 'Unknown Expiry Date'"
      [value]="domainUtils.getRemainingDaysText(domain.expiry_date)"
      [severity]="domainUtils.getExpirySeverity(domain.expiry_date)"
      styleClass="ml-2 w-20"
    ></p-tag>  
  </div>

  <!-- Tags -->
  <div *ngIf="domain.tags?.length">
    <p-tag *ngFor="let tag of domain.tags" [value]="tag" styleClass="bg-highlight rounded-2xl text-highlight px-2  py-1 mr-1"></p-tag>
  </div>


  <!-- IP address list -->
  <p-panel [toggleable]="true" *ngIf="domain.ip_addresses?.length" class="custom-pannel">
    <ng-template pTemplate="header">
      <h4 class="text-surface-400 m-0 mb-2 uppercase text-sm font-bold">IP Addresses</h4>
    </ng-template>
    <ul class="list-none p-0 m-0">
      <li *ngFor="let ip of domain.ip_addresses" class="font-mono text-xs">
        {{ ip.ip_address }} ({{ ip.is_ipv6 ? 'IPv6' : 'IPv4' }})
      </li>
    </ul>
  </p-panel>

   <!-- SSL Info -->
  <p-panel [toggleable]="true" *ngIf="domain.ssl" class="custom-pannel">
    <ng-template pTemplate="header">
      <h4 class="text-surface-400 m-0 mb-2 uppercase text-sm font-bold">SSL Certificate</h4>
    </ng-template>
    <div class="flex flex-col gap-1">
      <p class="m-0 text-xs">
        <strong class="font-semibold">Issuer:</strong> {{ domain.ssl.issuer }}</p>
      <p class="m-0 text-xs">
        <strong class="font-semibold">Issuer Country:</strong> {{ domain.ssl.issuer_country }}
      </p>
      <p class="m-0 text-xs">
        <strong class="font-semibold">Subject:</strong> {{ domain.ssl.subject }}
      </p>
      <p class="m-0 text-xs">
        <strong class="font-semibold">Valid From:</strong> {{ domain.ssl.valid_from | date:'mediumDate' }}
      </p>
      <p class="m-0 text-xs">
        <strong class="font-semibold">Valid To:</strong> {{ domain.ssl.valid_to | date:'mediumDate' }}
      </p>
      <p class="m-0 text-xs">
        <strong class="font-semibold">Key Size:</strong> {{ domain.ssl.key_size }}
      </p>
      <p class="m-0 text-xs">
        <strong class="font-semibold">Signature Algorithm:</strong> {{ domain.ssl.signature_algorithm }}
      </p>
      <p class="m-0 text-xs truncate max-w-xs">
        <strong class="font-semibold">Fingerprint:</strong> {{ domain.ssl.fingerprint }}
      </p>
    </div>
  </p-panel>

  <!-- Who Is Info -->
  <p-panel [toggleable]="true" *ngIf="domain.whois" class="custom-pannel">
    <ng-template pTemplate="header">
      <h4 class="text-surface-400 m-0 mb-2 uppercase text-sm font-bold">WHOIS Records</h4>
    </ng-template>
    <div class="flex flex-col gap-1">
      <p class="m-0 text-xs" *ngIf="domain.whois.name">
        <strong class="font-semibold">Name:</strong> {{ domain.whois.name }}
      </p>
      <p class="m-0 text-xs" *ngIf="domain.whois.organization">
        <strong class="font-semibold">Organization:</strong> {{ domain.whois.organization }}
      </p>
      <p class="m-0 text-xs" *ngIf="domain.whois.street || domain.whois.city || domain.whois.state">
        <strong class="font-semibold">Address:</strong> 
        {{ domain.whois.street }}, 
        {{ domain.whois.city }}, 
        {{ domain.whois.state }} 
        {{ domain.whois.postal_code }}
      </p>
      <p class="m-0 text-xs">
        <strong class="font-semibold">Country:</strong> {{ domain.whois.country }}
      </p>
    </div>
  </p-panel>

  <!-- Notes -->
  <div *ngIf="domain.notes" class="bg-highlight rounded text-highlight p-2">
    <span>{{ domain.notes }}</span>
  </div>

</div>
